<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ù¾Ø§Ø¯Ø´Ø§Ù‡ÛŒ Ù…Ø®ØªØ§Ø±</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: sans-serif;
      direction: rtl;
      text-align: center;
      padding: 20px;
    }
    h2 {
      margin-bottom: 15px;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    .tab-btn {
      padding: 10px 20px;
      background: #333;
      margin: 0 5px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }
    .tab-btn.active {
      background: #ffc107;
      color: #000;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .item {
      background: #222;
      padding: 12px;
      border-radius: 10px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .item img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
    }
     #battles .item img {
      width: 80px;
      height: 80px;
    }
    .item p {
      flex: 1;
      margin: 0 15px;
      text-align: right;
    }
    .btn-group {
       display: flex;
  align-items: center;
  gap: 8px;
    }
    .upgrade-btn, .fight-btn {
      padding: 6px 12px;
      background: #ffc107;
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .check {
      color: #0f0;
      font-size: 18px;
      display: none;
      margin-right: 5px;
    }
    .back-btn {
      display: inline-block;
      margin-top: 30px;
      padding: 12px 25px;
      background: #444;
      border-radius: 8px;
      color: #fff;
      text-decoration: none;
      transition: 0.3s;
    }
    .back-btn:hover {
      background: #666;
    }
    .power-display {
      font-size: 20px;
      margin-bottom: 15px;
      color: #ffc107;
    }
    .level-label {
      font-size: 14px;
      background: #333;
      padding: 4px 8px;
      border-radius: 6px;
    }
    .power-cost {
      font-size: 14px;
  color: #ff4d4d;
  white-space: nowrap;
    }
  </style>
</head>
<body>

<h2>ğŸ° Ù¾Ø§Ø¯Ø´Ø§Ù‡ÛŒ Ù…Ø®ØªØ§Ø±</h2>

<div class="power-display">Ù‚Ø¯Ø±Øª Ú©Ù„: <span id="totalPower">0</span></div>

<div class="tabs">
 <div id="btn-upgrades" class="tab-btn active" onclick="openTab('upgrades')">Ø§Ø±ØªÙ‚Ø§ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§</div>
<div id="btn-battles" class="tab-btn" onclick="openTab('battles')">Ù†Ø¨Ø±Ø¯ Ùˆ Ù…Ø±Ø§Ø­Ù„</div>
  <div class="tab-btn" onclick="window.location.href='defense.html'">Ø¨Ø®Ø´ Ø¯ÙØ§Ø¹</div>
</div>

<div id="upgrades" class="tab-content active">
  <div class="item">
    <img src="images/item-1.webp" alt="Ú¯Ù†Ø¯Ù…">
    <p>Ø§Ù†Ø¨Ø§Ø± Ú¯Ù†Ø¯Ù…</p>
    <div class="btn-group">
      <button class="upgrade-btn" onclick="upgradeItem('wheat')">Ø§Ø±ØªÙ‚Ø§</button>
      <span class="level-label">Ù„ÙˆÙ„: <span id="level-wheat">1</span></span>
      <span id="cost-wheat" class="power-cost">Ù‚Ø¯Ø±Øª: 350</span>
    </div>
  </div>
  <div class="item">
    <img src="images/item-2.webp" alt="Ø¯ÛŒÙˆØ§Ø±">
    <p>Ø¯ÛŒÙˆØ§Ø± Ø¯ÙØ§Ø¹ÛŒ</p>
    <div class="btn-group">
      <button class="upgrade-btn" onclick="upgradeItem('wall')">Ø§Ø±ØªÙ‚Ø§</button>
      <span class="level-label">Ù„ÙˆÙ„: <span id="level-wall">1</span></span>
      <span id="cost-wall" class="power-cost">Ù‚Ø¯Ø±Øª: 400</span>
    </div>
  </div>
  <div class="item">
    <img src="images/item-3.webp" alt="Ø¨Ø±Ø¬ Ø¯ÛŒØ¯Ù‡â€ŒØ¨Ø§Ù†ÛŒ">
    <p>Ø¨Ø±Ø¬ Ø¯ÛŒØ¯Ù‡â€ŒØ¨Ø§Ù†ÛŒ</p>
    <div class="btn-group">
      <button class="upgrade-btn" onclick="upgradeItem('tower')">Ø§Ø±ØªÙ‚Ø§</button>
      <span class="level-label">Ù„ÙˆÙ„: <span id="level-tower">1</span></span>
      <span id="cost-tower" class="power-cost">Ù‚Ø¯Ø±Øª: 550</span>
    </div>
  </div>
  <div class="item">
    <img src="images/item-4.webp" alt="Ø³Ø±Ø¨Ø§Ø² Ø®Ø§Ù†Ù‡">
    <p>Ø³Ø±Ø¨Ø§Ø² Ø®Ø§Ù†Ù‡</p>
    <div class="btn-group">
      <button class="upgrade-btn" onclick="upgradeItem('soldier_house')">Ø§Ø±ØªÙ‚Ø§</button>
      <span class="level-label">Ù„ÙˆÙ„: <span id="level-soldier_house">1</span></span>
      <span id="cost-soldier_house" class="power-cost">Ù‚Ø¯Ø±Øª: 600</span>
    </div>
  </div>
  <div class="item">
    <img src="images/item-5.webp" alt="Ø§Ù…ÙˆØ± Ù¾Ø§Ø¯Ø´Ø§Ù‡ÛŒ">
    <p>Ø®Ø±Ø¬ Ø§Ù…ÙˆØ± Ù¾Ø§Ø¯Ø´Ø§Ù‡ÛŒ</p>
    <div class="btn-group">
      <button class="upgrade-btn" onclick="upgradeItem('kingdom_affairs')">Ø§Ø±ØªÙ‚Ø§</button>
      <span class="level-label">Ù„ÙˆÙ„: <span id="level-kingdom_affairs">1</span></span>
      <span id="cost-kingdom_affairs" class="power-cost">Ù‚Ø¯Ø±Øª: 1000</span>
    </div>
  </div>
  <div class="item">
    <img src="images/item-6.webp" alt="ØªØ§Ù…ÛŒÙ† ØºÙ„Ø§Øª">
    <p>ØªØ§Ù…ÛŒÙ† ØºÙ„Ø§Øª</p>
    <div class="btn-group">
      <button class="upgrade-btn" onclick="upgradeItem('grain_supplies')">Ø§Ø±ØªÙ‚Ø§</button>
      <span class="level-label">Ù„ÙˆÙ„: <span id="level-grain_supplies">1</span></span>
      <span id="cost-grain_supplies" class="power-cost">Ù‚Ø¯Ø±Øª: 1200</span>
    </div>
  </div>
</div>

<div id="battles" class="tab-content">

  <div class="item">
    <img src="images/enemy-15.webp" alt="Ù‚ÛŒØ§Ù…">
    <p>Ø¢ØºØ§Ø² Ù‚ÛŒØ§Ù…</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(5000, 'aghaz')">Ø§Ù†Ø¬Ø§Ù…</button>
      <span class="power-cost">5000 ğŸ—¡ï¸</span>
      <span id="check-aghaz" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-13.webp" alt="Ù¾ÛŒÙ…Ø§Ù†">
    <p>Ù¾ÛŒÙ…Ø§Ù† Ø¨Ø§ Ú©ÛŒØ§Ù†</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(10000, 'piman')">Ø§Ù†Ø¬Ø§Ù…</button>
      <span class="power-cost">10000 ğŸ—¡ï¸</span>
      <span id="check-piman" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-14.webp" alt="Ø¨ÛŒØ¹Øª">
    <p>Ø¨ÛŒØ¹Øª Ø¨Ø§ Ù…Ø­Ù…Ø¯Ø¨Ù† Ø­Ù†ÛŒÙÙ‡</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(15000, 'biat')">Ø§Ù†Ø¬Ø§Ù…</button>
      <span class="power-cost">15000 ğŸ—¡ï¸</span>
      <span id="check-biat" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-1.webp" alt="Ø¹Ù…Ø±">
    <p>Ø´Ú©Ø³Øª Ø¹Ù…Ø±</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(20000, 'omar')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">20000 ğŸ—¡ï¸</span>
      <span id="check-omar" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-2.webp" alt="Ø¬Ø§Ø³ÙˆØ³â€ŒÙ‡Ø§">
    <p>Ø´Ú©Ø³Øª Ø¬Ø§Ø³ÙˆØ³â€ŒÙ‡Ø§</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(25000, 'jason')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">25000 ğŸ—¡ï¸</span>
      <span id="check-jason" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-3.webp" alt="Ù…Ø±Ø²">
    <p>ÙØªØ­ Ù…Ù†Ø§Ø·Ù‚ Ù…Ø±Ø²ÛŒ</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(27000, 'borders')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">27000 ğŸ—¡ï¸</span>
      <span id="check-borders" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-4.webp" alt="Ø´Ù…Ø±">
    <p>Ø´Ú©Ø³Øª Ø´Ù…Ø±</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(30000, 'shemr')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">30000 ğŸ—¡ï¸</span>
      <span id="check-shemr" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-5.webp" alt="Ø­Ø±Ù…Ù„Ù‡">
    <p>Ø´Ú©Ø³Øª Ø­Ø±Ù…Ù„Ù‡</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(35000, 'hormala')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">35000 ğŸ—¡ï¸</span>
      <span id="check-hormala" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-6.webp" alt="Ú©ÙˆÙÙ‡">
    <p>ÙØªØ­ Ú©ÙˆÙÙ‡</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(45000, 'kufa')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">45000 ğŸ—¡ï¸</span>
      <span id="check-kufa" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-7.webp" alt="Ø§Ø¨Ù† Ø²ÛŒØ§Ø¯">
    <p>Ø´Ú©Ø³Øª Ø§Ø¨Ù† Ø²ÛŒØ§Ø¯</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(50000, 'moavieh')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">50000 ğŸ—¡ï¸</span>
      <span id="check-moavieh" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-8.webp" alt="Ø²Ø¨ÛŒØ±ÛŒâ€ŒÙ‡Ø§">
    <p>Ø´Ú©Ø³Øª Ø²Ø¨ÛŒØ±ÛŒâ€ŒÙ‡Ø§</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(65000, 'zobayri')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">65000 ğŸ—¡ï¸</span>
      <span id="check-zobayri" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-9.webp" alt="Ù…Ú©Ù‡">
    <p>Ø¨Ø§Ø²Ù¾Ø³â€ŒÚ¯ÛŒØ±ÛŒ Ù…Ú©Ù‡</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(80000, 'mekka')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">80000 ğŸ—¡ï¸</span>
      <span id="check-mekka" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-10.webp" alt="Ø´Ø§Ù…">
    <p>ÙØªØ­ Ø´Ø§Ù…</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(100000, 'sham')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">100000 ğŸ—¡ï¸</span>
      <span id="check-sham" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-12.webp" alt="Ø§Ø±ØªØ´ Ù…Ø¹Ø§ÙˆÛŒÙ‡">
    <p>Ø´Ú©Ø³Øª Ø§Ø±ØªØ´ Ù…Ø¹Ø§ÙˆÛŒÙ‡</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(150000, 'crown1')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">150000 ğŸ—¡ï¸</span>
      <span id="check-crown1" class="check">âœ”</span>
    </div>
  </div>

  <div class="item">
    <img src="images/enemy-11.webp" alt="ØªØ§Ø¬ Ùˆ ØªØ®Øª">
    <p>Ø¨Ø§Ø²Ù¾Ø³â€ŒÚ¯ÛŒØ±ÛŒ ØªØ§Ø¬ Ùˆ ØªØ®Øª</p>
    <div class="btn-group">
      <button class="fight-btn" onclick="defeatEnemy(200000, 'crown2')">Ø­Ù…Ù„Ù‡!</button>
      <span class="power-cost">200000 ğŸ—¡ï¸</span>
      <span id="check-crown2" class="check">âœ”</span>
    </div>
  </div>

</div>

<a href="index.html" class="back-btn">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ</a>

<script>
 function openTab(tab) {
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
  document.getElementById("btn-" + tab).classList.add('active');
  document.getElementById(tab).classList.add('active');
}

function defeatEnemy(requiredPower, id) {
  let power = parseInt(localStorage.getItem("totalPower")) || 0;
  let defeatedKey = "defeated-" + id;

  if (power >= requiredPower) {
    if (!localStorage.getItem(defeatedKey)) {
      power -= requiredPower;
      localStorage.setItem("totalPower", power);
      localStorage.setItem(defeatedKey, "true");
      alert("ğŸ‰ Ø¯Ø´Ù…Ù† Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯!");
      showDefeatCheck(id, true);
      updatePower();
    } else {
      alert("Ø§ÛŒÙ† Ø¯Ø´Ù…Ù† Ù‚Ø¨Ù„Ø§ Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯Ù‡!");
    }
  } else {
    alert("âŒ Ù‚Ø¯Ø±Øª Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒ!");
  }
}

function showDefeatCheck(id, show) {
  const el = document.getElementById("check-" + id);
  if (el) el.style.display = show ? "inline" : "none";
  const btn = el?.parentElement.querySelector(".fight-btn");
  if (btn) btn.style.display = show ? "none" : "inline-block";
}

function updatePower() {
  let power = parseInt(localStorage.getItem("totalPower")) || 0;
  document.getElementById("totalPower").innerText = power.toLocaleString();
}

function loadLevels() {
  let items = ['wheat', 'wall', 'tower', 'soldier_house', 'kingdom_affairs', 'grain_supplies'];
  let costs = {
    wheat: 350,
    wall: 400,
    tower: 550,
    soldier_house: 600,
    kingdom_affairs: 1000,
    grain_supplies: 1200
  };

  items.forEach(item => {
    let key = "level-" + item;
    if (!localStorage.getItem(key)) {
      localStorage.setItem(key, 1);
    }
  });

  items.forEach(item => {
    let level = parseInt(localStorage.getItem("level-" + item));
    document.getElementById("level-" + item).innerText = level;
    document.getElementById("cost-" + item).innerText = "Ù‚Ø¯Ø±Øª: " + (costs[item] + (level) * 300).toLocaleString();
  });
}

function upgradeItem(item) {
  let power = parseInt(localStorage.getItem("totalPower")) || 0;
  let key = "level-" + item;
  let level = parseInt(localStorage.getItem(key));

  let costs = {
    wheat: 350,
    wall: 400,
    tower: 550,
    soldier_house: 600,
    kingdom_affairs: 1000,
    grain_supplies: 1200
  };

  let upgradeCost = costs[item] + (level - 1) * 300;

  if (power >= upgradeCost) {
    level++;
    localStorage.setItem(key, level);
    localStorage.setItem("totalPower", power - upgradeCost);
    document.getElementById("level-" + item).innerText = level;
    document.getElementById("cost-" + item).innerText = "Ù‚Ø¯Ø±Øª: " + (costs[item] + (level) * 300).toLocaleString();
    alert(item + " Ø¨Ù‡ Ù„ÙˆÙ„ " + level + " Ø±Ø³ÛŒØ¯!");
  } else {
    alert("âŒ Ù‚Ø¯Ø±Øª Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒ!");
  }
  updatePower();
}

function loadDefeatedEnemies() {
  let enemies = ['aghaz', 'piman', 'biat', 'omar', 'jason', 'borders', 'shemr', 'hormala', 'kufa', 'moavieh', 'zobayri', 'mekka', 'sham', 'crown1', 'crown2'];
  enemies.forEach(id => {
    let defeated = localStorage.getItem("defeated-" + id);
    showDefeatCheck(id, defeated === "true");
  });
}

// Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
updatePower();
loadLevels();
loadDefeatedEnemies();
</script>

</body>
</html>
