<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø¨Ø®Ø´ Ø¯ÙØ§Ø¹</title>
  <style>
    body {
      font-family: Vazir, sans-serif;
      direction: rtl;
      background: #1b1b1b;
      color: #f1f1f1;
      padding: 20px;
      text-align: center;
      margin: 0;
    }

    h2 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #ffcc00;
    }

    .coin-box {
      font-size: 24px;
      background: #333;
      padding: 12px;
      border-radius: 10px;
      display: inline-block;
      margin: 15px 0;
      border: 1px solid #555;
    }

    img.enemy {
      width: 360px;
      height: 200px;
      border-radius: 16px;
      margin: 20px 0 10px;
      object-fit: cover;
      border: 3px solid #444;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .info {
      margin: 10px 0;
      font-size: 18px;
      line-height: 2;
      background: #292929;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #444;
    }

    hr {
      border: none;
      border-top: 1px solid #444;
      margin: 20px 0;
    }

    #attackMessage {
      margin-top: 20px;
      color: #ff5555;
      font-size: 19px;
      padding: 10px;
      background: #2b2b2b;
      border-radius: 8px;
      display: inline-block;
      border: 1px solid #ff3333;
    }

    #countdown {
      margin-top: 15px;
      font-size: 18px;
      color: #ccc;
    }

    button {
      padding: 10px 22px;
      font-size: 16px;
      margin: 12px 6px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #444;
      color: #fff;
      transition: all 0.3s ease;
    }

    button:hover {
      background: #666;
    }

    button:active {
      transform: scale(0.96);
    }
  </style>
</head>
<body>

  <h2>ğŸ° Ø¨Ø®Ø´ Ø¯ÙØ§Ø¹</h2>

  <div id="coinDisplay" class="coin-box">ğŸ’° Ø³Ú©Ù‡: 0</div>

  <div>
    <img src="images/def.png" alt="Ø¯Ø´Ù…Ù†" class="enemy">
  </div>

  <div class="info">
    <strong>Ù†Ø§Ù… Ø¯Ø´Ù…Ù†:</strong> Ù‚Ø¨ÛŒÙ„Ù‡ ØªØ§Ø±ÛŒÚ©ÛŒ<br>
    <strong>Ù‡Ø¯Ù:</strong>Ù†Ø§Ø¨ÙˆØ¯ÛŒ Ø§Ù…Ù¾Ø±Ø§Ø·ÙˆØ±ÛŒ Ø´Ù…Ø§ <br>
    <strong>Ø±Ø¦ÛŒØ³ Ø¯Ø´Ù…Ù†:</strong> Ø´Ø¨Ø­ Ø³ÛŒØ§Ù‡
  </div>

  <hr>

  <div id="attackMessage">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯ÙØ§Ø¹...</div>
  <div id="countdown">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ ØªØ§ Ø­Ù…Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ: ---</div>

  <button onclick="goBack()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>

  <script>
    let coins = parseInt(localStorage.getItem("coins")) || 50000;
    document.getElementById("coinDisplay").innerText = "ğŸ’° Ø³Ú©Ù‡: " + coins;

    function saveCoins() {
      localStorage.setItem("coins", coins);
      document.getElementById("coinDisplay").innerText = "ğŸ’° Ø³Ú©Ù‡: " + coins;
    }

    function attack() {
      const resources = ["Ø§Ù†Ø¨Ø§Ø± Ú¯Ù†Ø¯Ù…", "Ø¯ÛŒÙˆØ§Ø± Ø¯ÙØ§Ø¹ÛŒ", "Ø³Ø±Ø¨Ø§Ø²Ø®Ø§Ù†Ù‡", "Ø¨Ø±Ø¬ Ø¯ÛŒØ¯Ù‡â€ŒØ¨Ø§Ù†ÛŒ"];
      const attackedResource = resources[Math.floor(Math.random() * resources.length)];
      const damage = Math.floor(Math.random() * (3000 - 1500 + 1)) + 1500;

      coins = Math.max(0, coins - damage);
      saveCoins();

      const message = `â—ï¸ Ø¯Ø´Ù…Ù† Ø¨Ù‡ ${attackedResource} Ø­Ù…Ù„Ù‡ Ú©Ø±Ø¯ Ùˆ ${damage} Ø³Ú©Ù‡ Ø§Ø² Ø´Ù…Ø§ Ú©Ù… Ø´Ø¯.`;
      document.getElementById("attackMessage").innerText = message;

      localStorage.setItem("lastAttackTime", Date.now());
    }

    function checkAttackTimer() {
      const lastAttackTime = parseInt(localStorage.getItem("lastAttackTime")) || 0;
      const now = Date.now();
      const twelveHours = 12 * 60 * 60 * 1000;
      const timePassed = now - lastAttackTime;

      if (timePassed >= twelveHours) {
        attack();
      }
    }

   function updateCountdown() {
  const lastAttackTime = parseInt(localStorage.getItem("lastAttackTime")) || 0;
  const now = Date.now();
  const twelveHours = 12 * 60 * 60 * 1000;
  const timeLeft = twelveHours - (now - lastAttackTime);

  if (timeLeft <= 0) {
    document.getElementById("countdown").innerText = "Ø­Ù…Ù„Ù‡ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯. Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ù…Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ...";
    return;
  }

  const hours = Math.floor(timeLeft / (1000 * 60 * 60));
  const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

  // Ø§ÙØ²ÙˆØ¯Ù† ØµÙØ± Ù¾ÛŒØ´ÙˆÙ†Ø¯ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø¹ØªØŒ Ø¯Ù‚ÛŒÙ‚Ù‡ Ùˆ Ø«Ø§Ù†ÛŒÙ‡
  const hStr = hours.toString().padStart(2, '0');
  const mStr = minutes.toString().padStart(2, '0');
  const sStr = seconds.toString().padStart(2, '0');

  document.getElementById("countdown").innerText = 
    `Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ ØªØ§ Ø­Ù…Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ: ${hStr}:${mStr}:${sStr}`;
}


    function goBack() {
      history.back();
    }

    // Ø´Ø±ÙˆØ¹ Ú©Ø§Ø±
    checkAttackTimer();
    updateCountdown();
    setInterval(updateCountdown, 1000); // Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡ ØªØ§ÛŒÙ…Ø± Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ù‡
  </script>

</body>
</html>
